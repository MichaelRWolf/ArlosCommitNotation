#!/bin/bash

warn() {
    echo "$*" >&2
}


parse_args() {
  while getopts "r:i:" opt; do
    case $opt in
      r)
        risk="$OPTARG"
        ;;
      i)
        intent="$OPTARG"
        ;;
      \?)
        echo "Invalid option: -$OPTARG" >&2
        exit 1
        ;;
    esac
  done
  shift $((OPTIND-1))
  
  message="$*"
  
  # warn "Risk: $risk"
  # warn "Message: $message"
}



function risk_code {
    case $1 in
	safe) echo -n '.';;
    esac
}


function intent_code {
    echo -n $1
}


main() {
    local risk=
    parse_args "$@"
    echo "$(risk_code $risk) $(intent_code $intent) $message"
}

main "$@"

